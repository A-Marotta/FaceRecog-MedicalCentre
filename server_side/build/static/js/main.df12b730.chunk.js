(this.webpackJsonpclient_side=this.webpackJsonpclient_side||[]).push([[0],{199:function(e,t,a){},201:function(e,t,a){},207:function(e,t,a){},225:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},246:function(e,t,a){},337:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){},407:function(e,t,a){},409:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(33),i=a.n(s),r=(a(199),a(67)),o=a(26),l=a(74),d=a(173),j=a.n(d),b=a(174),u=a.n(b),p=a(175),h=a.n(p),m=(a(200),a(201),a(7));function O(){var e=Object(o.g)();return Object(m.jsxs)(l.a,{className:"sidebar",children:[Object(m.jsx)(l.d,{children:Object(m.jsx)("h3",{className:"sidebar-title",children:"MedCentre"})}),Object(m.jsxs)(l.b,{children:[Object(m.jsxs)("div",{className:"sidebar-item main-item",children:[Object(m.jsx)("span",{className:"sidebar-icon",children:Object(m.jsx)(j.a,{})}),Object(m.jsx)(r.b,{to:"/dashboard",className:"link-to",children:Object(m.jsx)("h3",{className:"sidebar-links",children:"Dashboard"})})]}),Object(m.jsxs)("div",{className:"sidebar-item sub-item",children:[Object(m.jsx)("span",{className:"sidebar-icon",children:Object(m.jsx)(u.a,{})}),Object(m.jsx)(r.b,{to:"/doctors",className:"link-to",children:Object(m.jsx)("h3",{className:"sidebar-links",children:"Doctors"})})]}),Object(m.jsxs)("div",{className:"sidebar-item sub-item",children:[Object(m.jsx)("span",{className:"sidebar-icon",children:Object(m.jsx)(h.a,{})}),Object(m.jsx)(r.b,{to:"patients",className:"link-to",children:Object(m.jsx)("h3",{className:"sidebar-links",children:"Patients"})})]})]}),Object(m.jsx)(l.c,{children:Object(m.jsx)("h3",{className:"sidebar-footer",onClick:function(){localStorage.removeItem("userInfo"),e.push("/"),window.location="/"},children:"Logout"})})]})}var x=a(46);a(207);function v(){var e=new Date,t=e.toString().split(" "),a=Object(x.a)(t),c=a[0],n=a[1],s=a[2];a.slice(3);return n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],"".concat(c," ").concat(n," ").concat(s)}function f(){var e=JSON.parse(localStorage.getItem("userInfo")).data.name;return Object(m.jsxs)("div",{className:"topbar",children:[Object(m.jsx)("div",{className:"topbar-left",children:Object(m.jsxs)("span",{className:"welcome-user",children:["Welcome, ",Object(m.jsxs)("span",{className:"user_name",children:[e,"."]})]})}),Object(m.jsx)("div",{className:"topbar-right",children:Object(m.jsx)("div",{className:"date",children:v()})})]})}var g=a(25),N=a(28),S=a.n(N),y=a(427);a(225);function w(){var e=Object(c.useState)(),t=Object(g.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),i=Object(g.a)(s,2),r=i[0],o=i[1],l=Object(c.useState)(),d=Object(g.a)(l,2),j=d[0],b=d[1],u=(JSON.parse(localStorage.getItem("userInfo")).data.name,(new Date).getDate()),p=(new Date).getMonth()+1,h=(new Date).getFullYear();1===p.toString().length&&(p="0".concat(p));var O="".concat(h,"-").concat(p,"-").concat(u);return Object(c.useEffect)((function(){S.a.post("/api/statistic/curmonth/appointments",{month:"".concat(h,"-").concat(p)}).then((function(e){n(e.data)})).catch((function(e){n("server error.")})),function(){1===p.toString().length&&(p="0".concat(p));S.a.post("/api/statistic/curdate/appointments",{date:O}).then((function(e){o(e.data)})).catch((function(e){o("server error.")}))}(),function(){var e=new Date,t=new Date(e.getTime()-6048e5).toISOString().split("T"),a=Object(x.a)(t),c=a[0];a.slice(1);S.a.post("/api/statistic/pastweek/appointments",{current_date:O,previous_week_date:c}).then((function(e){b(e.data)})).catch((function(e){b("server error.")}))}()})),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"dashboard-wrapper",children:Object(m.jsx)("h1",{className:"dashboard-title",children:" Dashboard "})}),Object(m.jsx)("div",{className:"dashboard-banner",children:Object(m.jsx)("img",{src:"img/banner_1.jpeg",alt:""})}),Object(m.jsx)("div",{className:"dashboard-wrapper",children:Object(m.jsxs)("div",{className:"top-stats",children:[Object(m.jsx)(y.a,{title:"Todays appointments",value:r}),Object(m.jsx)(y.a,{title:"Past seven days",value:j}),Object(m.jsx)(y.a,{title:"Monthly appointments",value:a})]})})]})}var k=a(95),D=a(96),C=a(97),T=a(109),_=a(105),I=a(426),P=(a(81),[{key:"allDoctors",tab:"All doctors"},{key:"doctorsWorkingToday",tab:"Doctors Working Today"}]),M=function(e){Object(T.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(D.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={doctorTab:"allDoctors",allDoctors:[],availableDoctors:[]},e.onTabChange=function(t,a){e.setState(Object(k.a)({},a,t))},e}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.a.all([S.a.get("/api/medclerk/reporting/listdoctors").then((function(t){e.setState({allDoctors:t.data})})),S.a.get("/api/medclerk/reporting/listdoctorstoday").then((function(t){e.setState({availableDoctors:t.data})}))])}},{key:"cardDisplay",value:function(){return"allDoctors"===this.state.doctorTab?Object(m.jsx)("div",{className:"doctor-wrapper",children:this.state.allDoctors.map((function(e){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h4",{className:"doctor-name",children:e.doctor_name}),Object(m.jsx)("img",{className:"doctor-img",src:e.doctor_img,alt:"Avatar"}),Object(m.jsx)("p",{className:"doctor-email",children:e.email})]},e._id)}))}):Object(m.jsx)("div",{className:"doctor-wrapper",children:this.state.availableDoctors.map((function(e){return Object(m.jsxs)("div",{className:"card-today",children:[Object(m.jsx)("h4",{className:"doctor-name",children:e.doctor_name}),Object(m.jsx)("img",{className:"doctor-img",src:e.doctor_img,alt:"Avatar"}),Object(m.jsx)("p",{className:"doctor-email",children:e.email})]},e._id)}))})}},{key:"render",value:function(){var e=this;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(I.a,{style:{width:"100%"},tabList:P,activeTabKey:this.state.doctorTab,onTabChange:function(t){e.onTabChange(t,"doctorTab")},children:this.cardDisplay()})})}}]),a}(n.a.Component),F=a(187),E=a(188),q=a(422),J=a(428),A=a(106);a(242),a(243);function W(){var e=Object(c.useState)(),t=Object(g.a)(e,2),a=(t[0],t[1]),n=Object(c.useState)([]),s=Object(g.a)(n,2),i=s[0],r=s[1],o=Object(c.useState)(),l=Object(g.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(),u=Object(g.a)(b,2),p=u[0],h=u[1],O=Object(c.useState)(),v=Object(g.a)(O,2),f=v[0],N=v[1],y=Object(c.useState)(),w=Object(g.a)(y,2),k=w[0],D=w[1];function C(e){N(!0),S.a.post("/api/patient/validaccount",{email:e}).then((function(e){200===e.status&&h(e.data),N(!1)}))}var T=E.a.Search;return Object(m.jsx)(I.a,{className:"book-apt-card",type:"inner",title:"Book a patient",children:Object(m.jsxs)("div",{className:"apt-wrapper",children:[Object(m.jsx)("div",{className:"apt-left",children:Object(m.jsx)(F.a,{onChange:function(e){r();var t=new Date(e),c=new Date(t.getTime()+864e5).toISOString().split("T"),n=Object(x.a)(c),s=n[0];n.slice(1);s+="T00:00:00+10:00",console.log(s),a(s),S.a.post("/api/medclerk/reporting/listdoctorsondate",{available_date:s}).then((function(e){var t=[];return e.data.forEach((function(e){var a={value:e._id,label:e.doctor_name};t.push(a)})),t})).then((function(e){D(s);var t=s.split("T"),a=Object(x.a)(t),c=a[0],n=(a.slice(1),[]);e.forEach((function(e){S.a.post("/api/patient/checkavailapt",{start_time:c,doctor_id:e.value}).then((function(t){var a=[];t.data.forEach((function(e){var t={value:e=(e=e.split("T")[1]).split("+")[0],label:e};a.push(t)})),e.children=a,n.push(e)}))})),setTimeout((function(){r(n.map((function(e){return e})))}),1e3)}))},value:new Date})}),Object(m.jsxs)("div",{className:"apt-right",children:[Object(m.jsx)(q.a,{orientation:"left",plain:!0,children:"Select doctor followed by available time."}),Object(m.jsx)(J.a,{options:i,onChange:function(e){j(e)},placeholder:"Please select"}),Object(m.jsx)(q.a,{className:"divider-padding-top",orientation:"left",plain:!0,children:"Enter patient name"}),f?Object(m.jsx)(T,{placeholder:"Please enter patient email address...",onSearch:C,loading:!0}):Object(m.jsx)(T,{placeholder:"Please enter patient email address...",onSearch:C}),Object(m.jsx)(q.a,{className:"divider-padding-top",orientation:"left",plain:!0,children:"Book appointment"}),d&&p?Object(m.jsx)(A.a,{type:"primary",size:24,onClick:function(){var e=k.split("T"),t=Object(x.a)(e),a=t[0];t.slice(1),a="".concat(a,"T").concat(d[1],"+10:00"),S.a.post("/api/patient/appointment",{doctor_id:d[0],patient_id:p._id,start_time:a}).then((function(e){200===e.status&&h(e.data),N(!1)}))},children:"Submit"}):Object(m.jsx)(A.a,{type:"primary",disabled:!0,children:"Submit"})]})]})})}var $=a(132),L=a(423),B=a(424),z=a(73);a(244);function K(){var e=Object(c.useState)(),t=Object(g.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),i=Object(g.a)(s,2),r=i[0],o=i[1],l=Object(c.useState)(),d=Object(g.a)(l,2),j=d[0],b=d[1],u=Object(c.useState)(),p=Object(g.a)(u,2),h=p[0],O=p[1],v=Object(c.useState)(),f=Object(g.a)(v,2),N=f[0],y=f[1],w=Object(c.useState)(),k=Object(g.a)(w,2),D=(k[0],k[1]),C=Object(c.useState)(),T=Object(g.a)(C,2),_=(T[0],T[1]),P=Object(m.jsx)(z.a,{style:{fontSize:24},spin:!0});function M(e){o(!0),S.a.post("/api/doctor/validaccount",{email:e}).then((function(e){200===e.status&&(console.log(e.data),n(e.data)),o(!1)}))}var F=E.a.Search;return Object(m.jsxs)(I.a,{className:"add-avail-card",type:"inner",title:"Insert availability",children:[Object(m.jsx)(q.a,{className:"divider-padding-top",orientation:"left",plain:!0,children:"Enter doctor name"}),r?Object(m.jsx)(F,{placeholder:"Please enter doctor email address...",onSearch:M,loading:!0}):Object(m.jsx)(F,{placeholder:"Please enter doctor email address...",onSearch:M}),Object(m.jsx)(q.a,{className:"divider-padding-top",orientation:"left",plain:!0,children:"Enter working date"}),Object(m.jsxs)("div",{className:"doctor-date-wrapper",children:[Object(m.jsx)($.a,{className:"input-doc-date-avail",bordered:!1,onChange:function(e){var t=e.toISOString().split("T"),a=Object(x.a)(t),c=a[0];a.slice(1),b(c)}}),Object(m.jsx)(L.a,{className:"input-doc-date-avail",placeholder:"Start Time",onChange:function(e){var t=e.toString().split(" ").slice(-2);t.pop(),O(t)}}),Object(m.jsx)(L.a,{className:"input-doc-date-avail",placeholder:"Finish Time",onChange:function(e){var t=e.toString().split(" ").slice(-2);t.pop(),y(t)}})]}),Object(m.jsxs)("div",{className:"operation-status",children:[j&&h&&N&&null!==a&&void 0!==a?Object(m.jsx)(A.a,{className:"submit-doc-date-avail",type:"primary",size:24,onClick:function(){o(!0);var e=a._id,t="".concat(j,"T").concat(h,"+10:00"),c="".concat(j,"T").concat(N,"+10:00");S.a.post("/api/doctor/availability",{doctor_id:e,start_time:t,end_time:c}).then((function(e){o(!1),console.log(e),200===e.status&&D(!0)})).catch((function(e){_(!0)}))},children:"Submit"}):Object(m.jsx)(A.a,{className:"submit-doc-date-avail",type:"primary",disabled:!0,children:"Submit"}),r?Object(m.jsx)(B.a,{className:"operation-indicator",indicator:P}):""]})]})}a(246);function U(){return Object(m.jsxs)("div",{className:"medclerk-doctor-wrapper",children:[Object(m.jsx)(M,{}),Object(m.jsx)(W,{}),Object(m.jsx)(K,{})]})}var Y=a(75),G=a(98),H=a(48),Q=a.n(H),R=a(181),V=a.n(R),X=a(182),Z=a.n(X),ee=a(183),te=a.n(ee),ae=a(425),ce=(a(337),a(338),a(339),{labelCol:{span:8},wrapperCol:{span:16}}),ne={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},se=function(e){Object(T.a)(a,e);var t=Object(_.a)(a);function a(e){var c;return Object(D.a)(this,a),(c=t.call(this,e)).onFinish=function(e){S()({method:"post",data:{email:e.user.email,password_digest:e.user.password,patient_name:e.user.name,dob:e.user.dob},withCredentials:!0,url:"/api/auth/patient/register"})},c.state={open:!1},c.handleModalClick=c.handleModalClick.bind(Object(G.a)(c)),c.uppy=Q()({id:"uppy1",autoProceed:!0,debug:!0}).use(V.a).use(te.a,{endpoint:"/api/auth/patient/uploadimage",fieldName:"photo",formData:!0}),c}return Object(C.a)(a,[{key:"componentWillUnmount",value:function(){this.uppy.close()}},{key:"handleModalClick",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){this.state.open;return Object(m.jsx)("div",{children:Object(m.jsxs)(ae.a,Object(Y.a)(Object(Y.a)({},ce),{},{name:"nest-messages",onFinish:this.onFinish,validateMessages:ne,children:[Object(m.jsx)(ae.a.Item,{name:["user","name"],label:"Name",rules:[{required:!0}],children:Object(m.jsx)(E.a,{id:"input-width"})}),Object(m.jsx)(ae.a.Item,{name:["user","email"],label:"Email",rules:[{type:"email",required:!0}],children:Object(m.jsx)(E.a,{id:"input-width"})}),Object(m.jsx)(ae.a.Item,{label:"Password",name:["user","password"],rules:[{required:!0,message:"Please input your password!"}],children:Object(m.jsx)(E.a.Password,{id:"input-width"})}),Object(m.jsx)(ae.a.Item,{name:["user","dob"],label:"Date of birth",rules:[{required:!0}],children:Object(m.jsx)(E.a,{id:"input-width"})}),Object(m.jsx)(Z.a,{uppy:this.uppy,target:document.body,plugins:["Webcam"],trigger:"#dashboard"}),Object(m.jsx)(ae.a.Item,{wrapperCol:Object(Y.a)(Object(Y.a)({},ce.wrapperCol),{},{offset:8}),children:Object(m.jsx)(A.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})}}]),a}(n.a.Component);a(405);function ie(){return Object(m.jsxs)("div",{className:"medclerk-patient-wrapper",children:[Object(m.jsx)("h2",{className:"patient-registration-title",children:"Patient registration form"}),Object(m.jsx)(se,{})]})}a(406);function re(){localStorage.getItem("userInfo");var e=Object(c.useState)(""),t=Object(g.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),i=Object(g.a)(s,2),r=i[0],o=i[1],l=Object(c.useState)(!1),d=Object(g.a)(l,2),j=(d[0],d[1]),b=Object(c.useState)(!1),u=Object(g.a)(b,2),p=(u[0],u[1]);return Object(m.jsx)("div",{className:"login-wrapper",children:Object(m.jsxs)("div",{className:"login-card",children:[Object(m.jsx)("div",{className:"login-left"}),Object(m.jsxs)("div",{className:"login-right",children:[Object(m.jsx)("h1",{className:"login-welcome",children:"MedCentre"}),Object(m.jsx)("span",{className:"login-text",children:"Welcome back!"}),Object(m.jsx)("span",{className:"login-text",children:"please login to view todays schedule."}),Object(m.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),p(!0),S()({method:"post",data:{email:a,password_digest:r},withCredentials:!0,url:"/api/auth/medclerk/login"}).then((function(e){p(!1),console.log(e),localStorage.setItem("userInfo",JSON.stringify(e)),200==e.status&&(window.location="/dashboard")})).catch((function(e){p(!1),j(e)}))},children:[Object(m.jsx)("input",{className:"login-input",type:"email",placeholder:"Email address",value:a,onChange:function(e){return n(e.target.value)},required:!0}),Object(m.jsx)("input",{className:"login-input",type:"password",placeholder:"Password",value:r,onChange:function(e){return o(e.target.value)},required:!0}),Object(m.jsx)("button",{className:"login-btn",type:"submit",children:"Log in"})]})]})]})})}a(407);var oe=function(){var e=localStorage.getItem("userInfo");return Object(m.jsx)(r.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/",children:e?Object(m.jsx)(o.a,{to:"/dashboard"}):Object(m.jsx)(re,{})}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)(O,{}),Object(m.jsx)(f,{}),Object(m.jsx)(o.b,{exact:!0,path:"/dashboard",children:e?Object(m.jsx)(w,{}):Object(m.jsx)(o.a,{to:"/"})}),Object(m.jsx)(o.b,{exact:!0,path:"/doctors",children:e?Object(m.jsx)(U,{}):Object(m.jsx)(o.a,{to:"/"})}),Object(m.jsx)(o.b,{exact:!0,path:"/patients",children:e?Object(m.jsx)(ie,{}):Object(m.jsx)(o.a,{to:"/"})})]})]})})},le=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,429)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(oe,{})}),document.getElementById("root")),le()}},[[409,1,2]]]);
//# sourceMappingURL=main.df12b730.chunk.js.map